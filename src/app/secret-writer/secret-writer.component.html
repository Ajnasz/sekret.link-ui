<div *ngIf="errorMessage" class="notification is-danger">{{errorMessage}}</div>
<form (submit)="onSubmit()">
	<h2 class="title is-4">New secret</h2>
	<div class="field">
		<app-secret [secret]="secret" label="Secret"></app-secret>
	</div>

	<div class="columns">
		<div class="column">
			<div class="field">
				<label class="label" for="expiration">Expiration:</label>
				<div class="control select">
					<select name="expiration" id="expiration" (change)="updateSelectedExpiration($event.target.value)">
						<option *ngFor="let option of expirations" [value]="option.value" [selected]="option.value == selectedExpiration">
						{{option.text}}
						</option>
					</select>
				</div>
			</div>
		</div>
		<div class="column">
			<div class="field">
				<div class="control">
					<label for="shareWithPerson" class="radio">
						<input type="radio" id="shareWithPerson" name="shareWith" value="person" [checked]="!shareWithTeam" (change)="changeShareWithTeam(1)">
						Share with a single person
					</label>
					<label for="shareWithTeam" class="radio">
						<input type="radio" id="shareWithTeam" name="shareWith" value="team" [checked]="shareWithTeam" (change)="changeShareWithTeam(2)">
						Share with a group
					</label>
				</div>
			</div>

			<div class="field">
				<div class="control">
					<input class="input" type="number" step="1" min="1" name="maxreads" id="maxReads" [(ngModel)]="maxReads">
				</div>
				<p class="help" *ngIf="shareWithTeam">The secret can be read by {{maxReads}} people.</p>
				<p class="help" *ngIf="!shareWithTeam">The secret can be read by one person.</p>
			</div>
		</div>
	</div>

	<div class="buttons">
		<button type="submit" class="button is-primary">Create secret</button>
	</div>
	<p class="is-size-7">Enter the message or password you want to share securely. After you submitted the message by pressing the "Create secret" button, you will get a link. Send this link to your messaging partner so she can read the secret message.</p>
	<p class="is-size-7"><strong>Attention!</strong> The message can be read only once! After it's read, the message will be destroyed and can not be restored.
	</p>
</form>
